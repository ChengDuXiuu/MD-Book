### 工厂设计模式

需求 ： 看一个披萨的项目： 要便于披萨种类的扩展， 要便于维护

    1) 披萨的种类很多(比如 GreekPizz、 CheesePizz 等)

    2) 披萨的制作有 prepare， bake, cut, box

    3) 完成披萨店订购功能。

#### 方式一 ：普通方式实现

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);"
    src="../资料/工厂设计模式方式一.jpg">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">无使用工厂设计模式</div>
</center>

1) 优点是比较好理解， 简单易操作。

2) 缺点是违反了设计模式的 ocp 原则， 即对扩展开放， 对修改关闭。 即当我们给类增加新功能的时候， 尽量不修
改代码， 或者尽可能少修改代码.

3) 比如我们这时要新增加一个 Pizza 的种类(Pepper 披萨)， 我们需要修改OrderPizza类中getInputAndCreatePizza()方法.而如果有多个OrderPizza类是我们就需要改多处代码。

<code><font color = ff00aa>分析：</font></code> 修改代码可以接受， 但是如果我们在其它的地方也有创建 Pizza 的代码， 就意味着， 也需要修改， 而创建 Pizza
的代码， 往往有多处。

<code><font color = ff00aa>思路：</font></code>  把创建 Pizza 对象封装到一个类中， 这样我们有新的 Pizza 种类时， 只需要修改该类就可， 其它有创建到 Pizza对象的代码就不需要修改了.-> 简单工厂模式

#### 方式二 ：简单工厂模式

简单工厂模式是属于创建型模式， 是工厂模式的一种。 简单工厂模式是由一个工厂对象决定创建出哪一种产品类的实例。 简单工厂模式是工厂模式家族中最简单实用的模式。

简单工厂模式： 定义了一个创建对象的类， 由这个类来封装实例化对象的行为(代码)。<font color=ffaa00>在软件开发中， 当我们会用到大量的创建某种、 某类或者某批对象时， 就会使用到工厂模式。</font>

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);"
    src="../资料/简单工厂模式第二式.jpg">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">简单工厂模式</div>
</center>

> 简单工厂模式中创建方法修改为static，则为静态工厂模式。

#### 方式三 工厂方法模式

如上图所示需求，解决思路：

使用简单工厂模式， 创建不同的简单工厂类， 比如 BJPizzaSimpleFactory、 LDPizzaSimpleFactory 等等.从当前这个案例来说， 也是可以的， 但是考虑到项目的规模， 以及软件的可维护性、 可扩展性并不是特别好，使用 > 工厂方法模式实现。

含义 ：

1) 工厂方法模式设计方案： 将披萨项目的实例化功能抽象成抽象方法， 在不同的口味点餐子类中具体实现。
2) 工厂方法模式： 将工厂模式中的case逻辑判断实例化不同的子类代码向上抽象成接口。通过扩展子工厂子类来取缔case逻辑判断。并且将对象的实例化推迟到调用方。即在客户端决定调用哪个子类实例。并弥补了简单工厂违背了开闭原则。只做到了在客户端修改实例化代码即可。

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);"
    src="../资料/工厂方法模式.jpg">
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">工厂方法模式</div>
</center>

#### 小结

简单工厂设计模式是对普通方式的第一步抽象 ： 将创造类的代码提取到工厂类中。

静态工厂模式在简单工厂设计模式基础上利用 接口 或 抽象类 设计架构从而达到高维护、高可用的结构。

工厂方法模式是对静态工厂模式的进一步抽象。将其创建方法抽象为抽象方法或接口，然后纵向扩展工厂类结构。


#### 心得

工厂模式：通过多态使用父接口|抽象类接受不同‘种类|类型’的子类实例。 核心 ：面向接口编程

适用 不怎么变化的‘种类|类型’的情况。例如操作符，已知操作符种类有+、-、*、/ 等等有限的几个，则可以使用工厂模式生成不同的子类实例。

使用面向接口编程切记防止子类 ‘类爆炸’ ，例如 打折子类有7折、9折、8折等等，我们可以使用一个子实现类来实现。


``不足``：如果不同的‘种类|类型’经常发生变化或新增，则不应使用工厂模式。因此上诉讲到使用工厂模式是不怎么变化的‘种类|类型’情况。

``弥补``：使用 策略模式

`不足`：工厂模式中使用switch，如果``新增策略模式子实现类``只要修改工厂模式代码。

`弥补`：反射反射，程序员的快乐。也可以通过工厂方法模式来动态扩展
