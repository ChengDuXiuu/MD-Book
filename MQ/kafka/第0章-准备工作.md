## 安装jdk

```bash
[root@node1 opt]# yum -y install java-1.8.0-openjdk java-1.8.0-openjdk-devel
[root@node1 opt]# java -version
openjdk version "1.8.0_262"
OpenJDK Runtime Environment (build 1.8.0_262-b10)
OpenJDK 64-Bit Server VM (build 25.262-b10, mixed mode)

[root@node1 opt]# vim /etc/profile
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin

[root@node1 opt]# source /etc/profile
```



## 安装MySQL 5.7 (不建议)

```bash
[root@node1 ~]# yum -y install wget lrzsz net-tools
[root@node1 ~]# wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm
[root@node1 ~]# yum -y install mysql57-community-release-el7-10.noarch.rpm
[root@node1 ~]# yum -y install mysql-community-server
[root@node1 ~]# systemctl start  mysqld.service
[root@node1 ~]# systemctl status mysqld.service
[root@node1 ~]# systemctl enable mysqld.service
[root@node1 ~]# netstat -anpt | grep 3306

查询root临时密码
[root@node1 ~]# grep "password" /var/log/mysqld.log
2019-02-14T22:34:02.620689Z 1 [Note] A temporary password is generated for root@localhost: &5E%TRUAzrDL
[root@node1 ~]# mysql -u root -p

#root临时密码是&5E%TRUAzrDL
修改root密码：
mysql> alter user 'root'@'localhost' identified by 'root新密码';
Query OK, 0 rows affected (0.00 sec)
mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)
#修改密码时如果提示因为安全问题，则先可以设置一个【大小写、英文字母超过8个】密码，然后修改密码强度：
mysql> set global validate_password_policy=0;
mysql> set global validate_password_length=1;
#然后退出去重新设置简单密码即可

创建数据库eagle：
mysql> create database eagle character set utf8 collate utf8_bin;
Query OK, 1 row affected (0.01 sec)
mysql> use eagle;
Database changed

创建数据库eagle：
mysql> create database eagle character set utf8 collate utf8_bin;
Query OK, 1 row affected (0.01 sec)
mysql> use eagle;
Database changed

卸载yum源
[root@node1 ~]# yum -y remove mysql57-community-release-el7-10.noarch
```





## 安装 MySQL 8.0

### 删除MySQL

```sql
service mysql stop

rpm -qa|grep mysql

yum remove mysql mysql-server mysql-libs mysql-server mysql-common

find / -name mysql  
rm -rf +上面查询出的文件
```



### 安装 MySQL8.0

```bash
# 下载
wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz

# 解压缩
tar -zxvf mysql-8.0.11-linux-glibc2.12-x86_64.tar.gz

# 重命名
mv mysql-8.0.11-linux-glibc2.12-x86_64 mysql8

# 创建文件夹data,存储文件;
cd /usr/local/mysql8/
mkdir ./data

# 创建用户及用户组
groupadd mysql
# 用户 （用户名/密码）
useradd -g mysql mysql
# 授权
chown -R mysql.mysql /usr/local/mysql8.0/  或
chown -R mysql .
chgrp -R mysql .

# 初始化数据库
cd /usr/local/mysql8/bin
./mysqld --user=mysql --basedir=/usr/local/mysql8/ --datadir=/usr/local/mysql8/data/ --initialize

# 得到临时密码，关注如下打印行。其中《root@localhost:》后面的就是密码   《注意 TMD 密码包含后面的逗号》
A temporary password is generated for root@localhost: DO67a-dtFE3,
```



新建my.cnf 并写入以下内容

```bash
vim /etc/my.cnf
```



```bash
[mysqld]
basedir = /usr/local/mysql8
datadir = /usr/local/mysql8/data
port = 3306
server_id = 1
```



建立MySQL服务

```sql
# cd /etc/local/mysql
cp -a ./support-files/mysql.server /etc/init.d/mysql

# 赋权
chmod +x /etc/init.d/mysql
chkconfig --add mysql
# 检查服务是否生效
chkconfig --list mysql

# 解决报错 mysql not find
ln -s /usr/local/mysql8/bin/mysql /usr/bin
```



```sql
# 启动MySQL服务
service mysql start

# 查看启动状态
service mysql status

# 停止MySQL服务
service mysql stop

```



```mysql
# 登录，输入刚刚记录的临时密码，临时密码包含所有内容，有逗号也要输入
mysql -u root -p

# 修改 密码
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '新密码';

flush privileges;
```





有需要可以加入下面的mysql配置

```mysql
[client]

port = 3306
#socket = /usr/local/lnmp/mysql-8.0.12/mysql.sock

[mysqld]

#设置mysql 8.0 的加密方式为 mysql_native_password (默认为:caching_sha2_password)
default_authentication_plugin=mysql_native_password

basedir = /usr/local/mysql8

datadir = /usr/local/mysql8/data
port = 3306
server_id = 1
#socket = /usr/local/lnmp/mysql-8.0.12/mysql.sock

#二进制日志目录
#log-bin = /usr/local/lnmp/mysql-8.0.12/mysql-bin
#日志格式
binlog-format=ROW
#自动删除过期日志的天数
expire_logs_days = 10
#限制单个文件大小
max_binlog_size = 100M

#查询日志
general_log = 1
#查询日志文件位置
general_log_file = /usr/local/mysql/data/query.log

#慢查询日志
slow_query_log = 1
#慢日志文件位置
slow_query_log_file = /usr/local/mysql/data/slow_query.log
#超过2秒记录
long_query_time = 2

#错误日志
#log-error = /usr/local/lnmp/mysql-8.0.12/error.log

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
```

