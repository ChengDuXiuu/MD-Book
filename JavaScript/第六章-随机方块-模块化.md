## 随机方块-模块化

1. index.html

	```html
	<!DOCTYPE html>
	<html lang="en">
	<head>
	    <meta charset="UTF-8">
	    <title>Title</title>
	    <link rel="stylesheet" href="css/style.css"></link>
	</head>
	<body>
	    <div id="container">
	
	    </div>
	<script type="text/javascript" src="js/main.js"/>
	<script>
	  
	</script>
	</body>
	</html>
	```

2. Style.css

	```css
	#container{
	    width: 800px;
	    height: 600px;
	    background-color: lightgray;
	    position: relative;
	}
	```

3. randomTool.js

	```javascript
	export default {
	    msg:'随机数生成工具对象',
	    getRandomIntInclusive(min,max){
	        min = Math.ceil(min);
	        max = Math.floor(max);
	        return Math.floor(Math.random() * (max - min + 1) + min); //The maximum is inclusive and the minimum is inclusive
	    }
	}
	```

4. Box.js

	```javascript
	function Box(parent,options) {//父节点、参数对象
	    options=options || {};
	    //属性
	    this.name=options.name || "demo";
	    this.width=options.width || "20";
	    this.height=options.height || "20";
	    this.x=options.x || "0";
	    this.y=options.y || "0";
	    this.background_color=options.background_color || "blue";
	
	    //创建div
	    this.div=document.createElement('div');
	    parent.appendChild(this.div);
	    this.parent=parent;
	    this.init();
	}
	//初始化
	Box.prototype.init=function () {
	    var div=this.div;
	    div.style.backgroundColor=this.background_color;
	    div.style.width=this.width+'px';
	    div.style.height=this.height+'px';
	    div.style.left=this.x+'px';
	    div.style.top=this.y+'px';
	
	    //脱离文档流
	    div.style.position='absolute'
	}
	//随机生成方块位置
	Box.prototype.random=function () {
	    let x=randomUtil.getRandomIntInclusive(0,this.parent.offsetWidth-this.width) ;
	    let y=randomUtil.getRandomIntInclusive(0,this.parent.offsetHeight-this.height) ;
	    this.div.style.left=x+'px';
	    this.div.style.top=y+'px';
	}
	
	export default {
	    msg:'盒子对象',
	    Box:Box,
	}
	```

5. Main.js

	```javascript
	import randomTool from "./randomTool";
	import Box from "./box";
	var array=[];
	for (var i=0;i<10;i++){
	    let r=randomTool.getRandomIntInclusive(0,255);
	    let g=randomTool.getRandomIntInclusive(0,255);
	    let b=randomTool.getRandomIntInclusive(0,255);
	
	
	    let box=new Box(document.getElementById("container"),{
	        background_color:'rgb('+r+','+g+','+b+')'
	    });
	    box.init();
	    array.push(box);
	}
	setInterval(function () {
	    for (var i=0;i<array.length;i++){
	        var box=array[i];
	        box.random();
	    }
	},500);
	```

6. 项目根目录新建.babelrc和package.json文件

	```.babelrc
	# .babelrc
	{
	  "presets": ["es2015"]
	}
	```

	```json
	# package.json
	{
	  "name": "08-ES6-Babel-Browerify",
	  "version": "1.0.0"
	}
	```

7. 安装babel-cli、babel-preset-es2015和browserify

	```bash
	npm install babel-cli browserify
	npm install babel-preset-es2015 --save-dev
	```

8. 使用Babel将ES6转ES5

	```bash
	node_modules/.bin/babel js -d js/build 
	```

9. 使用browserify将es5语法js文件打包为浏览器可识别js

	```bash
	 node_modules/.bin/browserify js/build/main.js -o ./js/target/build.js
	```

10. 修改index.html 为打包后的build.js

	```html
	<script type="text/javascript" src="./js/target/build.js"/>
	```